---
title: "Manipulating data with tidyr"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

---

<div class="boxobj">
<strong>Learning Objectives</strong>

*  Fill in learning objectives   
</div>

---

```{r}
library(tidyverse)
metadata <- read.csv("data/Ecoli_metadata.csv")
```

# First section

# Tibbles
Tibbles are a modern take on data frames. They keep the features that have stood the test of time and drop the features that used to be convenient but are now frustrating (ie. converting character vectors to factors).

## Creating
You can create a tibble using the `tibble()` function:

```{r}
t <- tibble(x=1:3, y= list(1:5, 1:10, 1:20))
t
dim(t)
```

## Reading in tibbles

Tibbles can be read into R using the `read_csv()` function. Note that the `read_csv()` function is different than the `read.csv()` function. Among other things, `read_csv()` will store the data as a tibble and `read.csv()` will store the data as a data frame.

## Data frames versus tibbles

For some applications, we will need to use data frames and for others tibbles. You will find that some older functions don't work on tibbles. We can easily convert between them using `as.data.frame()` or `as_tibble()`:
```{r}
metadata_tib <- as_tibble(metadata)
metadata_tib
metadata_df <- as.data.frame(metadata_tib)
head(metadata_df)
```

# Exploring tibbles

We can explore the contents of a tibble in several ways. We can view the first ten rows of a tibble as above, which tells us lots of information about the column types and the number of rows. We can also use:
```{r}
glimpse(metadata_tib)
```

We can return a vector containing the values of a variable (column) using the $ sign:
```{r}
metadata_tib$generation
```
We can also use the subsetting operator [] directly on tibbles. A tibble is two dimensional, so we must pass two arguments to the [] operator; the first indicates the row(s) we require and the second indicates the column(s). To return the value in row 10, column 1:
```{r}
metadata_tib[10,1]
```
Similarly, to return the values in rows 25 to 30, and columns 1 to 3:
```r{}
metadata_tib[25:30, 1:3]
```
If we leave an index blank, this acts as a wildcard and matches all of the rows or columns:
```{r}
metadata_tib[22,]
metadata_tib[,1:3]
```
You can also refer to columns by name with quotation marks:
```{r}
metadata_tib[,"sample"]
```
Note that subsetting a tibble returns another tibble. In contrast, using the $ sign to extract a variable returns a vector:
```{r}
metadata_tib$sample
```

For more information on tibbles see the [tibbles vignette](https://cran.r-project.org/web/packages/tibble/vignettes/tibble.html).





